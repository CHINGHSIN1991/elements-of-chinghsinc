---
import ContentCard from "../common/ContentCard.astro";
import { slugify, formatDate } from "../../ts/utils";
import type { CollectionEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props as Props;
const { title, description, date, tags, cover } = project.data;
const projectId = project.id || slugify(title);
const href = `/project/${projectId}`;
const imageUrl = cover || "/assets/images/fallback-image.png";
const tagLinks = (tags || []).map((tag: string) => ({
  label: tag,
  href: `/project/tag/${slugify(tag)}`,
}));
---

<ContentCard
  href={href}
  title={title}
  time={formatDate(new Date(date))}
  description={description}
  image={{ src: imageUrl, alt: title }}
  tags={tagLinks}
  cta={{ label: "查看專案", href }}
/>
