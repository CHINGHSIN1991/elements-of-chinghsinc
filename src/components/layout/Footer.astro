---
import { getLocaleFromUrl, useTranslations } from '../../i18n/utils';
import type { Locale } from '../../i18n/ui';

interface Props {
  lang?: Locale;
  t?: (key: string, replacements?: Record<string, string | number>) => any;
}

const { lang: incomingLang, t: translate } = Astro.props as Props;
const resolvedLang = incomingLang ?? getLocaleFromUrl(Astro.url);
const { t: fallbackT } = useTranslations(Astro, resolvedLang);
const t = translate ?? fallbackT;
const year = new Date().getFullYear();
const rssHref = `${import.meta.env.BASE_URL}rss.xml`;
---

<footer class="w-full bg-background-secondary py-8 mt-auto">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
      <small class="text-text-secondary">
        {t('footer.copyright', { year })}
      </small>
      <nav class="flex gap-4" aria-label="Footer navigation">
        <a
          href={rssHref}
          class="text-text-secondary hover:text-text transition-colors"
        >
          {t('footer.subscribe')}
        </a>
      </nav>
    </div>
  </div>
</footer>
