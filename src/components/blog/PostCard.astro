---
import ContentCard from "../common/ContentCard.astro";
import { slugify, formatDate } from "../../ts/utils";

const { post } = Astro.props;
const { title, description, date, image, tags, category } = post.data;

const href = `/blog/${post.id}`;
const imageUrl = image?.src || post.data.cover || "/assets/images/fallback-image.png";
const imageAlt = image?.alt || title || "文章圖片";
const tagLinks = (tags || []).map((tag: string) => ({
  label: tag,
  href: `/blog/tag/${slugify(tag)}`,
}));
---

<ContentCard
  href={href}
  title={title}
  time={formatDate(new Date(date))}
  description={description}
  image={{ src: imageUrl, alt: imageAlt }}
  category={category}
  tags={tagLinks}
/>
