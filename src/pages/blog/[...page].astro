---
import CollectionPage, { createCollectionPage } from '../_templates/CollectionPage.astro';
import PostCard from '../../components/blog/PostCard.astro';
import CategoryList from '../../components/common/CategoryList.astro';
import PopularItems from '../../components/common/PopularItems.astro';

export const prerender = true;

const { getStaticPaths, props } = createCollectionPage({
  collectionName: 'posts',
  cardComponent: PostCard,
  sidebarComponents: [
    { component: CategoryList, props: { collectionName: 'posts', heading: 'Categories', basePath: '/blog' } },
    { component: PopularItems, props: { collectionName: 'posts', title: 'Popular Posts', linkPrefix: 'blog' } }
  ]
});

export { getStaticPaths };

const { page } = Astro.props;
---
<CollectionPage {...props} page={page} />
